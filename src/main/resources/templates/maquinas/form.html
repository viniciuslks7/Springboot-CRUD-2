<!-- expects: maquina (Maquina), oficinas (List<Oficina>), actionUrl -->
<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<body>
  <div th:replace="fragments/navbar :: navbar"></div>
  <main class="page-container px-4 py-6">
    <div th:fragment="content">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold text-secondary" th:text="${maquina.id != null} ? 'Editar Máquina' : 'Nova Máquina'">Form Máquina</h1>
    <a th:href="@{/maquinas}" class="btn btn-outline">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      Voltar
    </a>
  </div>

  <div class="card bg-base-100 shadow-xl max-w-2xl">
    <div class="card-body">
      <form th:action="@{/maquinas}" th:object="${maquina}" method="post">
        <div class="form-control">
          <label class="label">
            <span class="label-text font-semibold">Modelo da Máquina</span>
          </label>
          <input type="text" th:field="*{modelo}" placeholder="Ex: LaserCutter 2000" class="input input-bordered input-secondary" required />
          <p th:if="${#fields.hasErrors('modelo')}" class="text-error text-sm mt-1" th:errors="*{modelo}">Erro</p>
        </div>

        <div class="form-control mt-4">
          <label class="label">
            <span class="label-text font-semibold">Status</span>
          </label>
          <select th:field="*{status}" class="select select-bordered select-secondary">
            <option value="" th:text="${maquina.status == null} ? 'Selecione o status' : ''">Selecione</option>
            <option value="ATIVA" th:selected="${maquina.status == 'ATIVA'}">ATIVA</option>
            <option value="MANUTENCAO" th:selected="${maquina.status == 'MANUTENCAO'}">MANUTENÇÃO</option>
            <option value="INATIVA" th:selected="${maquina.status == 'INATIVA'}">INATIVA</option>
          </select>
        </div>

        <div class="form-control mt-4">
          <label class="label">
            <span class="label-text font-semibold">Oficina</span>
          </label>
          <select th:field="*{oficina.id}" class="select select-bordered">
            <option value="">-- Selecionar Oficina --</option>
            <option th:each="o : ${oficinas}" th:value="${o.id}" th:text="${o.nome != null ? o.nome : o.local}" th:selected="${maquina.oficina != null && maquina.oficina.id == o.id}">Oficina</option>
          </select>
        </div>

        <div class="form-control mt-6">
          <div class="flex gap-4 justify-end">
            <button type="submit" class="btn btn-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              Salvar
            </button>
            <a th:href="@{/maquinas}" class="btn btn-outline">Cancelar</a>
          </div>
        </div>
      </form>
    </div>
  </div>
    </div>
  </main>
  <footer class="bg-white border-t mt-8">
    <div class="page-container px-4 py-4 text-sm text-gray-500">
      &copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span> Oficina3D — Vinicius
    </div>
  </footer>
</body>
</html>
