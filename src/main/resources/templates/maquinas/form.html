<!-- expects: maquina (Maquina), oficinas (List<Oficina>), actionUrl -->
<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<body class="flex flex-col min-h-screen bg-gray-50">
  <div th:replace="fragments/navbar :: navbar"></div>
  <main class="page-container px-4 py-6 bg-white rounded-xl shadow-md flex-1">
    <div th:fragment="content">
  <div class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-blue-500 to-pink-400 flex items-center gap-2" th:text="${maquina.id != null} ? 'Editar Máquina' : 'Nova Máquina'">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 inline-block text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 21h6l-.75-4M9 21h6M9.75 17h4.5M6 8v8a2 2 0 002 2h8a2 2 0 002-2V8M6 8V6a2 2 0 012-2h8a2 2 0 012 2v2" />
        </svg>
      </h1>
    <a th:href="@{/maquinas}" class="bg-gradient-to-r from-purple-500 via-blue-500 to-pink-400 hover:from-purple-700 hover:to-pink-600 text-white font-bold py-2 px-5 rounded-lg shadow transition flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      Voltar
    </a>
  </div>

  <div class="card bg-white shadow-2xl border border-gray-200 max-w-2xl">
    <div class="card-body">
      <form th:action="@{/maquinas}" th:object="${maquina}" method="post">
        <input type="hidden" th:field="*{id}" />
        <div class="form-control">
          <label class="label">
            <span class="label-text font-semibold text-purple-700">Modelo da Máquina</span>
          </label>
          <input type="text" th:field="*{modelo}" placeholder="Ex: LaserCutter 2000" class="input input-bordered border-2 border-purple-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-300" required />
          <p th:if="${#fields.hasErrors('modelo')}" class="text-error text-sm mt-1" th:errors="*{modelo}">Erro</p>
        </div>

        <div class="form-control mt-4">
          <label class="label">
            <span class="label-text font-semibold text-blue-700">Status</span>
          </label>
          <select th:field="*{status}" class="select select-bordered border-2 border-blue-400 focus:border-pink-500 focus:ring-2 focus:ring-pink-300">
            <option value="" th:text="${maquina.status == null} ? 'Selecione o status' : ''">Selecione</option>
            <option value="ATIVA" th:selected="${maquina.status == 'ATIVA'}">ATIVA</option>
            <option value="MANUTENCAO" th:selected="${maquina.status == 'MANUTENCAO'}">MANUTENÇÃO</option>
            <option value="INATIVA" th:selected="${maquina.status == 'INATIVA'}">INATIVA</option>
          </select>
        </div>

        <div class="form-control mt-4">
          <label class="label">
            <span class="label-text font-semibold text-pink-700">Oficina</span>
          </label>
          <select th:field="*{oficina.id}" class="select select-bordered border-2 border-pink-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-300">
            <option value="">-- Selecionar Oficina --</option>
            <option th:each="o : ${oficinas}" th:value="${o.id}" th:text="${o.nome != null ? o.nome : o.local}" th:selected="${maquina.oficina != null && maquina.oficina.id == o.id}">Oficina</option>
          </select>
        </div>

        <div class="form-control mt-6">
          <div class="flex gap-4 justify-end">
            <button type="submit" class="bg-gradient-to-r from-purple-500 via-blue-500 to-pink-400 hover:from-purple-700 hover:to-pink-600 text-white font-bold py-2 px-5 rounded-lg shadow transition flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              Salvar
            </button>
            <a th:href="@{/maquinas}" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-5 rounded-lg shadow transition flex items-center gap-2">Cancelar</a>
          </div>
        </div>
      </form>
    </div>
  </div>
    </div>
  </main>
  <footer class="bg-white border-t mt-8">
    <div class="page-container px-4 py-4 text-sm text-gray-500 text-center">
      &copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span> Oficina3D — Vinicius
    </div>
  </footer>
</body>
</html>
